==========
visualqc
==========


.. image:: https://img.shields.io/pypi/v/visualqc.svg
        :target: https://pypi.python.org/pypi/visualqc

.. image:: https://api.codacy.com/project/badge/Grade/2da8c2b4dbcd433eb4943eb52f0b00d6
        :target: https://www.codacy.com/app/raamana/visualqc?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=raamana/visualqc&amp;utm_campaign=Badge_Grade


Tool to automate the quality control workflow of MRI segmentations (gray and white matter, cortical, subcortical and other arbitrary segmentations) produced by Freesurfer and other tools.

.. image:: vqc_logo_small.png

Assessing and assuring the quality of imaging data, be it an raw acquisition (fMRI run or T1w MRI) or an automatic segmentation (be it gray or white surfaces for cortical thickness, or a subcortical segmentation) requires visual inspection manually. Not just one slice. Or one view. But many slices in all the views to ensure the 3d segmentation is accurate at the voxel-level. Often, looking at raw data is not sufficient to spot subtle errors, wherein statistical measurements (across space or time) assist greatly in rating the quality of image or severity of artefacts spotted. This process, in its simplest form, is quite cumbersome and time-consuming. Without any assistive tool, it requires opening both the MRI and segmentation for one subject in an editor that can overlay and color them properly, and manually reviewing one slice at a time, navigate through many many slices, and record your rating in a spreadsheet. And repeat this process for multiple subjects. In some even more demanding tasks (such as assessing the accuracy of cortical thickness e.g. generated by Freesurfer, or in reviewing an EPI sequence), you may need to review multiple types of visualizations (such as surface-redering of pial surface or carpet plots with specific temporal stats in fMRI), in addition to voxel-wise data. Without an automatic tool, logistics process allows too many human mistakes, esp. as you flip through 100s of subjects over many weeks jumping through multiple visualization software and spreadsheets. Moreover, with clever use of outlier detection technique on dataset-wide statistics (across all the subjects in a dataset) help us identify subtle errors (such as a small ROI with unrealiastic thickness value that does not normally appear in summary visualizations). ``visualqc``, purpose-built for rigorous quality control, aims to reduce this laborious process to a single command to seamlessly present relevant composite visualizations while alerting user of any outliers, offer an easy way to record the ratings, and quickly navigate through 100s of subjects with ease. All you need to do is sit back, focus your expert eye on data and ``visualqc`` takes care of the flow and bookkeeping.

Neuroimagers familiar with `ENIGMA quality control (QC) protocols <http://enigma.ini.usc.edu/protocols/imaging-protocols/>`_ would especially find this tool much easier. In addition to integrating valuable experience and knowledge from those protocols, this tool makes it easy so you don't have to deal with multiple scripts (to generate images and combine visualizations), and no alternating between multiple spreadsheets to keep track of ratings. Additional advantages include zooming in and needing to use only a single tool to QC both cortical and subcortical segmentations.

* Free software: MIT license
* Documentation: https://visualqc.readthedocs.io.


Use-cases supported
------------------------

VisualQC supports the following use cases:

 * Functional MRI scans (focused visual review, with rich and custom-built visualizations)
 * Freesurfer cortical parcellations (accuracy of pial/white surfaces on T1w mri)
 * Structural T1w MRI scans (artefact rating)
 * Volumetric segmenation accuracy (on T1w MRI)
 * Registration quality (spatial alignment) within a single modality (multimodal support coming)


Features
--------

Each use case aims to offer the following features:

* Ability to zoom-in slices displayed to to ensure you won't miss any detail (down to the voxel-level), so you can rate its quality with confidence.
* Automatically detect and flag outliers during review (multivariate high-dimensional outlier detection)
* Display multiple slices in multiple views, and easily navigate all subjects in a dataset
* Keyboard shortcuts to speed up the process, no need to lift your fingers!
* Allows to make arbitrary notes on the current review session
* Allows you to customize the visualizations to your expert preference (such as removing certain overlays, control the transparency, change how two images blended together).

Galleries
----------

 * :doc:`gallery_freesurfer`
 * :doc:`gallery_functional_mri`
 * :doc:`gallery_t1_mri`
 * :doc:`gallery_registration_unimodal`
 * :doc:`gallery_segmentation_volumetric`



